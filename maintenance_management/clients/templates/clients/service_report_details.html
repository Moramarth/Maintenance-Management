{% extends 'base.html' %}
{% load custom_tags %}
{% block page_title %}
    Service Reports
{% endblock %}
{% block content %}

    {% if viewer_group.name == 'Supervisor' %}
        <a class="btn btn-success" href="{% url 'assign report' object.pk %}">Assign Report</a>
        <a class="btn btn-success" href="{% url 'show all reports' %}">View Service Reports</a>
    {% elif viewer_group.name == 'Engineering' %}
        <a class="btn btn-success" href="{% url 'self assign' object.pk %}">Assign Report to Me</a>
        <a class="btn btn-success" href="{% url 'assign to contractor' object.pk %}">Assign Report to Contractor</a>
        <a class="btn btn-success" href="{% url 'show all reports' %}">View Service Reports</a>
    {% endif %}
    <p>{{ object.title }}</p>
    <p>{{ object.description }}</p>
    <p>{{ object.user.appuserprofile.first_name }}</p>
    <p>{{ object.company.name }}</p>
    <p>{{ object.report_status }}</p>
    {% if object.assigned_to %}
        <p>
            <a href="{% url 'profile details' object.assigned_to.pk %}">
                {{ object.assigned_to.appuserprofile.first_name }}
            </a>
        </p>
    {% endif %}
    {% if object.report_status == "Pending" %}
        <div>
            <a class="btn btn-warning" href="{% url 'edit report' object.pk %}">Edit Report</a>
            <a class="btn btn-danger" href="{% url 'delete report' object.pk %}">Delete Report</a>
        </div>
    {% else %}
        <a class="btn btn-warning disabled" href="{% url 'edit report' object.pk %}">Edit Report</a>
        <a class="btn btn-danger disabled" href="{% url 'delete report' object.pk %}">Delete Report</a>
    {% endif %}
{% endblock %}